# Улучшение показателей Lighthouse

## Что уже сделано в проекте

- **Viewport** в `web/index.html`: `maximum-scale=5.0`, `user-scalable=yes` (Accessibility).
- **Nginx** (в `DEPLOY_ALL.sh`): кэш для статики (js, wasm, css, шрифты, картинки) — 1 год; `index.html` без кэша; заголовки X-Content-Type-Options, X-Frame-Options, Referrer-Policy.

После следующего деплоя (`bash DEPLOY_ALL.sh`) на сервере подтянутся кэш и заголовки.

---

## Оценки и что с ними делать

| Категория   | Сейчас | Что влияет |
|------------|--------|------------|
| **Performance** | 38 | Большой JS Flutter (~10 MB), долгий LCP. Кэш Nginx улучшит повторные загрузки. Сильно поднять сложно без рефакторинга (ленивая загрузка, разбиение бандла). |
| **Accessibility** | 89 | Viewport исправлен. Контраст — править цвета в приложении вручную. |
| **Best Practices** | 52 | Основные минусы: **нет HTTPS**, нет редиректа HTTP→HTTPS, нет HSTS/CSP. Это решается на сервере. |
| **SEO** | 100 | В порядке. |

---

## Что сделать на сервере для Best Practices и HTTPS

1. **Выпустить бесплатный SSL (Let's Encrypt):**
   ```bash
   sudo apt install certbot python3-certbot-nginx -y
   sudo certbot --nginx -d ваш-домен.com
   ```
   Если домена нет, используйте IP — тогда HTTPS через Let's Encrypt недоступен (нужен домен).

2. **После появления HTTPS** в Nginx добавить редикт HTTP→HTTPS и при необходимости HSTS (инструкции есть в выводе certbot).

3. **Третьи куки и ошибки в консоли** — по желанию разбирать в DevTools; на оценку Lighthouse влияют не так сильно, как HTTPS.

---

## Итог

- Кэш и заголовки безопасности уже в скрипте деплоя — достаточно заново запустить `DEPLOY_ALL.sh` на сервере.
- Для заметного роста Best Practices и безопасности нужен **HTTPS** (домен + certbot).
- Performance 38 для тяжёлого Flutter Web типичен; значительный рост — за счёт оптимизации приложения (деление бандла, ленивая загрузка).
