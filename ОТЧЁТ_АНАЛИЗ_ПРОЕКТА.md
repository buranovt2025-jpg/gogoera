# Отчёт: Анализ проекта GogoEra (Era Shop)

**Дата:** 31 января 2026  
**Репозиторий:** https://github.com/buranovt2025-jpg/gogoera

---

## 1. ОПИСАНИЕ ПРОЕКТА

**GogoEra** (Era Shop) — гибридное e-commerce приложение с элементами social commerce и live selling. Поддерживает платформы: **Android**, **iOS**, **Web**, **Linux**, **macOS**, **Windows**.

### Стек технологий

| Компонент | Технология |
|-----------|------------|
| Фронтенд | Flutter (GetX, ~380 Dart-файлов) |
| Бэкенд | Node.js, Express |
| БД | MongoDB (Mongoose) |
| Real-time | Socket.IO |
| Платежи | Stripe, Razorpay, Flutterwave |
| Live streaming | Zego Express Engine |
| Push-уведомления | Firebase (FCM) |
| Локализация | 19 языков (EN, RU, ES, FR, AR, HI, TR и др.) |

---

## 2. АРХИТЕКТУРА

### Backend (30+ модулей)

- **user**, **seller**, **admin** — учётные записи
- **product**, **category**, **subCategory**, **attributes** — каталог
- **cart**, **order** — корзина и заказы
- **favorite**, **follower** — социальные функции
- **review**, **rating** — отзывы и рейтинги
- **reel** — короткие видео (Shorts)
- **liveSeller**, **liveSellingHistory**, **liveSellingView** — live selling
- **promoCode**, **promoCodeCheck** — промокоды
- **address**, **sellerWallet**, **withdraw**, **bank** — доставка, выплаты
- **notification**, **FAQ**, **setting** — настройки и уведомления
- **sellerRequest**, **productRequest** — модерация (опционально)

### Flutter-приложение

- **View/OnboardingScreens** — splash, onboarding, PageManage
- **View/UserLogin** — вход (email, OTP, Google, Apple, demo seller)
- **View/MyApp/AppPages** — Home, Gallery, Reels, Cart, Search, Product Detail, Checkout, Live Consumer
- **View/MyApp/Profile** — профиль, заказы, адреса, пароль
- **View/MyApp/Seller** — панель продавца: товары, рилсы, заказы, кошелёк, live streaming
- **Controller** — GetX-контроллеры (~77 файлов)
- **ApiService** — HTTP-клиенты для всех API

---

## 3. РОЛИ И ВОЗМОЖНОСТИ

### Покупатель (User)

| Функция | Есть | Связь |
|---------|------|-------|
| Регистрация/вход | ✅ | user/login, OTP, Google, Apple |
| Каталог товаров | ✅ | product, category, subCategory |
| Поиск/фильтры | ✅ | product/search, filterWiseProduct |
| Карточка товара | ✅ | product/detail |
| Корзина | ✅ | cart |
| Оформление заказа | ✅ | order/create |
| Промокоды | ✅ | promoCodeCheck |
| Адреса доставки | ✅ | address |
| Избранное | ✅ | favorite |
| Подписка на продавцов | ✅ | follower |
| Отзывы и рейтинги | ✅ | review, rating |
| Рилсы (Shorts) | ✅ | reel |
| Live-трансляции | ✅ | liveSeller, socket |
| Уведомления | ✅ | notification |
| История заказов | ✅ | order/orderDetailsForUser |

### Продавец (Seller)

| Функция | Есть | Связь |
|---------|------|-------|
| Заявка на продавца | ✅ | sellerRequest |
| Добавление товаров | ✅ | product/create |
| Редактирование товаров | ✅ | productRequest (если isUpdateProductRequest) |
| Рилсы (загрузка) | ✅ | reel/uploadReel |
| Управление заказами | ✅ | order/orderDetailsForSeller, updateOrder |
| Кошелёк, вывод | ✅ | sellerWallet, withdraw |
| Live selling | ✅ | Zego + Socket.IO |
| Каталог продавца | ✅ | product/allProductForSeller |
| Профиль, банк, адрес | ✅ | seller/update, bank, address |

### Админ

- Админ-панель — **отдельный React-проект** (в этом репо нет)
- API-маршруты: `/admin`, `/dashboard`, модерация категорий, товаров, заявок продавцов
- Модель: `Admin` (email, password, bcrypt)

---

## 4. ЛОГИКА И СВЯЗИ

### Цепочка покупки

1. User → Cart (addToCart) → Checkout (getOnlySelectedAddress, promoCodeCheck)
2. Create Order (createOrderByUser) → платёж (Stripe/Razorpay/Flutterwave)
3. Order → items с productId, sellerId, status (Pending → Confirmed → Out Of Delivery → Delivered)
4. Notification (order placed, status updated)

### Связь User ↔ Seller

- User может стать Seller через `sellerRequest` (заявка)
- `User.isSeller = true` → `User.seller` = ObjectId Seller
- Seller привязан к User (`userId`)

### Live Selling

- Seller запускает live через Zego → создаётся `LiveSellingHistory`, `LiveSeller`
- Socket.IO: `liveRoomConnect`, `addView`, `lessView`, `comment`, `endLiveSeller`
- Пользователи видят трансляцию, добавляют товары в корзину из live

### Рилсы (Shorts)

- Reel связан с Product и Seller
- Like/Dislike (reel/likeOrDislikeOfReel)
- Лента для пользователя (reel/getReelsForUser)

---

## 5. ОБНАРУЖЕННЫЕ ПРОБЛЕМЫ И ОШИБКИ

### Критические

| Проблема | Где | Описание |
|----------|-----|----------|
| OTP на web | sign_in_email | Изначально требовался OTP после пароля; почта не настроена. Исправлено: прямой вход по паролю. |
| int.parse crash | splash_screen_controller | zegoAppId "ZEGO APP ID" вызывал FormatException. Исправлено: int.tryParse. |
| Platform.isIOS на web | sign_in_email, demo_sign_in, bottom_tab_bar | dart:io.Platform не поддерживается на web. Исправлено: kIsWeb. |
| Зависание splash | splash_screen_controller | API/socket могли висеть. Исправлено: timeout 15/5/20 сек. |
| Zego на web | bottom_tab_bar | createEngine вызывался на web, мог висеть. Исправлено: if (!kIsWeb). |

### Средние

| Проблема | Где | Описание |
|----------|-----|----------|
| Chat | chat_page | Логика отправки сообщений закомментирована; чат по сути заглушка. |
| Опечатка | ckeck_login_service | Файл "ckeck" вместо "check". |
| Опечатка | cheak_out | "cheak" вместо "check". |
| Опечатка | reportoReel | "reporto" вместо "report". |
| TODO | Множество initState | Оставлены TODO в initState — косметика. |

### Инфраструктура

| Проблема | Описание |
|----------|----------|
| HTTP без HTTPS | Lighthouse: 33 Best Practices, 13 insecure requests. |
| Service Worker на HTTP | "Service Worker API unavailable" — ожидаемо. |
| Stripe/Razorpay ключи | Плейсхолдеры; для реальных платежей нужна настройка. |
| Firebase | На web не инициализируется; push/Crashlytics отключены. |
| Админ-панель | Отсутствует в репо; нужен отдельный проект. |

---

## 6. ФУНКЦИОНАЛЬНОСТЬ ПО МОДУЛЯМ

| Модуль | Реализован | Работает | Примечание |
|--------|------------|----------|------------|
| Авторизация | ✅ | ✅ | Email, OTP, Google, Apple, demo |
| Каталог | ✅ | ✅ | Категории, подкатегории, атрибуты |
| Корзина | ✅ | ✅ | Добавление, удаление, checkout |
| Заказы | ✅ | ✅ | Создание, статусы, уведомления |
| Избранное | ✅ | ✅ | Favorite/Unfavorite |
| Подписки | ✅ | ✅ | Follow/Unfollow продавцов |
| Отзывы/рейтинг | ✅ | ✅ | Review, Rating |
| Рилсы | ✅ | ✅ | Загрузка, лента, лайки |
| Live selling | ✅ | ⚠️ | Zego + Socket; на web Zego отключён |
| Платежи | ✅ | ⚠️ | Stripe, Razorpay, Flutterwave — нужны ключи |
| Чат | ⚠️ | ❌ | UI есть, логика отключена |
| Уведомления | ✅ | ⚠️ | API есть; FCM на web не настроен |
| Админ | ⚠️ | ❌ | API есть; UI — отдельный проект |

---

## 7. СТОИТ ЛИ ДОРАБАТЫВАТЬ ДАЛЬШЕ?

### Сильные стороны

1. **Широкий функционал** — e-commerce + рилсы + live + социальные связи.
2. **Готовый бэкенд** — 30+ модулей, Socket.IO, cron для выплат.
3. **Кросс-платформенность** — Flutter (mobile + web).
4. **Локализация** — 19 языков.
5. **Деплой** — скрипты, seed данных, тестовые аккаунты.
6. **Модели данных** — User, Seller, Product, Order, Reel, Follower, Review, Cart — логичная схема.

### Слабые стороны

1. **Технический долг** — опечатки в именах, TODO, зависимость от dart:io на web.
2. **Платежи** — без ключей не работают.
3. **Чат** — не реализован.
4. **Админка** — отдельный проект, в репо нет.
5. **Lighthouse** — Performance ~45, Best Practices 33 (HTTP, SW).
6. **Zego** — на web отключён; live только на мобильных.

### Вердикт

**Да, проект стоит дорабатывать**, если цель — маркетплейс или social e-commerce. Основа сильная: каталог, заказы, продавцы, рилсы, подписки. Основные риски — платежи, чат и админка.

---

## 8. ГОТОВНОСТЬ К SOCIAL E-COMMERCE

### Уже есть (social e-commerce)

- **Подписки на продавцов** (Follower)
- **Рилсы** (Shorts) — контент от продавцов
- **Live selling** — трансляции с покупками
- **Отзывы и рейтинги**
- **Избранное**

### Чего не хватает для полноценного social e-commerce

| Функция | Статус | Сложность |
|---------|--------|-----------|
| Чат покупатель–продавец | Заглушка | Средняя |
| Комментарии к постам/рилсам | Нет | Низкая |
| Лента активности (активность друзей/подписок) | Нет | Высокая |
| Репосты/шеринг | Нет | Низкая |
| Сообщения/личка | Нет | Высокая |
| Группы/сообщества | Нет | Высокая |
| Рекомендации "друзья купили" | Нет | Средняя |
| UGC (контент от пользователей) | Частично (review) | Средняя |

### Рекомендация

**Да, из этого проекта можно сделать social e-commerce.**  
База уже есть: рилсы, подписки, live, отзывы. Доработки по приоритету:

1. **Чат** — разблокировать и доработать логику (Socket.IO или Firebase).
2. **Комментарии к рилсам** — расширить модель Reel или добавить Comment.
3. **Лента** — объединить рилсы + активность подписок.
4. **Рекомендации** — на основе follow и просмотров.

---

## 9. ИТОГОВАЯ ОЦЕНКА

| Критерий | Оценка (1–10) | Комментарий |
|----------|---------------|-------------|
| Архитектура | 7 | Модульный backend, GetX на фронте |
| Функционал | 8 | Широкий охват e-commerce + social |
| Качество кода | 6 | Опечатки, TODO, platform-специфика |
| Готовность к продакшену | 5 | HTTP, ключи, админка |
| Потенциал social e-commerce | 8 | Рилсы, follow, live — хорошая база |

**Общая оценка: 7/10** — перспективный проект с солидной основой, требующий доработки платежей, чата и инфраструктуры (HTTPS, админка).
