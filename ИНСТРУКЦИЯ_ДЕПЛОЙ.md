# Инструкция по деплою GogoEra на 165.232.74.201

## Репозиторий
**GitHub:** https://github.com/buranovt2025-jpg/gogoera  
Проект уже сохранён в репозитории с конфигурацией под новый сервер.

---

## Способ 1: Через PowerShell (с локального ПК)

1. Открой PowerShell в папке `gogoera`
2. Запусти:
   ```powershell
   .\DEPLOY_TO_SERVER.ps1
   ```
3. Когда запросит пароль, введи: **buranov1983Timur**
4. Деплой займёт 10–20 минут (Node.js, MongoDB, Flutter, сборка)

---

## Способ 2: Вручную по SSH

1. Подключись к серверу:
   ```bash
   ssh root@165.232.74.201
   ```
   Пароль: **buranov1983Timur**

2. Скачай и запусти скрипт:
   ```bash
   curl -sL -o /root/FULL_DEPLOY.sh https://raw.githubusercontent.com/buranovt2025-jpg/gogoera/main/FULL_DEPLOY.sh
   chmod +x /root/FULL_DEPLOY.sh
   /root/FULL_DEPLOY.sh
   ```

3. Дождись окончания (10–20 мин).

---

## После деплоя

- **Сайт:** http://165.232.74.201/
- **API:** http://165.232.74.201:5000/
- **API проверка:** http://165.232.74.201:5000/setting — должен вернуть JSON

---

## Что делает скрипт FULL_DEPLOY.sh

1. Устанавливает зависимости (git, curl, nginx и др.)
2. Создаёт swap 2 GB (для сборки Flutter на 2 GB RAM)
3. Устанавливает Flutter
4. Клонирует репозиторий gogoera
5. Устанавливает Node.js 18
6. Устанавливает MongoDB 8.0 (Ubuntu 24.04 noble)
7. Импортирует атрибуты в MongoDB
8. Устанавливает PM2 и запускает backend
9. Собирает Flutter web
10. Настраивает Nginx
11. Открывает порты 22, 80, 5000

---

## Тестовая среда

Это тестовая среда. Для продакшена:
- Настрой домен и SSL (Let's Encrypt)
- Смени пароли и секретные ключи
- Обнови BASE_URL в `lib/utiles/api_url.dart` и `backend/config.js`
